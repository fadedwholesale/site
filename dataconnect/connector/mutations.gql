# Faded Skies Portal - Data Connect Mutations
# Simplified mutations for Data Connect compatibility

# User Management Mutations
mutation UpsertUser($id: String!, $email: String!, $role: String!, $companyName: String, $contactName: String, $phone: String, $address: String, $licenseNumber: String, $status: String!) {
  user_upsert(data: {
    id: $id,
    email: $email,
    role: $role,
    companyName: $companyName,
    contactName: $contactName,
    phone: $phone,
    address: $address,
    licenseNumber: $licenseNumber,
    status: $status,
    updatedAt: "request.time"
  }) {
    id
    email
    role
    companyName
    contactName
    status
    updatedAt
  }
}

mutation UpdateUserStatus($id: String!, $status: String!) {
  user_upsert(data: {
    id: $id,
    status: $status,
    updatedAt: "request.time"
  }) {
    id
    status
    updatedAt
  }
}

mutation UpdateLastLogin($id: String!) {
  user_upsert(data: {
    id: $id,
    lastLogin: "request.time"
  }) {
    id
    lastLogin
  }
}

# Product Management Mutations
mutation UpsertProduct($id: UUID!, $name: String!, $description: String, $category: String!, $subcategory: String, $thcContent: Float, $cbdContent: Float, $price: Float!, $wholesalePrice: Float!, $stockQuantity: Int!, $minOrderQuantity: Int, $maxOrderQuantity: Int, $status: String!, $images: String, $labResults: String, $createdBy: String!) {
  product_upsert(data: {
    id: $id,
    name: $name,
    description: $description,
    category: $category,
    subcategory: $subcategory,
    thcContent: $thcContent,
    cbdContent: $cbdContent,
    price: $price,
    wholesalePrice: $wholesalePrice,
    stockQuantity: $stockQuantity,
    minOrderQuantity: $minOrderQuantity,
    maxOrderQuantity: $maxOrderQuantity,
    status: $status,
    images: $images,
    labResults: $labResults,
    createdBy: $createdBy,
    updatedAt: "request.time"
  }) {
    id
    name
    description
    category
    price
    wholesalePrice
    stockQuantity
    status
    updatedAt
  }
}

mutation UpdateProductStock($id: UUID!, $stockQuantity: Int!) {
  product_upsert(data: {
    id: $id,
    stockQuantity: $stockQuantity,
    updatedAt: "request.time"
  }) {
    id
    stockQuantity
    updatedAt
  }
}

mutation UpdateProductStatus($id: UUID!, $status: String!) {
  product_upsert(data: {
    id: $id,
    status: $status,
    updatedAt: "request.time"
  }) {
    id
    status
    updatedAt
  }
}

# Order Management Mutations
mutation UpsertOrder($id: UUID!, $orderNumber: String!, $partnerId: String!, $status: String!, $totalAmount: Float!, $subtotal: Float!, $tax: Float, $shipping: Float, $notes: String, $shippingAddress: String, $billingAddress: String, $estimatedDelivery: Timestamp, $actualDelivery: Timestamp, $trackingNumber: String) {
  order_upsert(data: {
    id: $id,
    orderNumber: $orderNumber,
    partnerId: $partnerId,
    status: $status,
    totalAmount: $totalAmount,
    subtotal: $subtotal,
    tax: $tax,
    shipping: $shipping,
    notes: $notes,
    shippingAddress: $shippingAddress,
    billingAddress: $billingAddress,
    estimatedDelivery: $estimatedDelivery,
    actualDelivery: $actualDelivery,
    trackingNumber: $trackingNumber,
    updatedAt: "request.time"
  }) {
    id
    orderNumber
    partnerId
    status
    totalAmount
    updatedAt
  }
}

mutation UpdateOrderStatus($id: UUID!, $status: String!) {
  order_upsert(data: {
    id: $id,
    status: $status,
    updatedAt: "request.time"
  }) {
    id
    status
    updatedAt
  }
}

mutation UpdateOrderTracking($id: UUID!, $trackingNumber: String!, $estimatedDelivery: Timestamp) {
  order_upsert(data: {
    id: $id,
    trackingNumber: $trackingNumber,
    estimatedDelivery: $estimatedDelivery,
    updatedAt: "request.time"
  }) {
    id
    trackingNumber
    estimatedDelivery
    updatedAt
  }
}

mutation CompleteOrder($id: UUID!) {
  order_upsert(data: {
    id: $id,
    status: "delivered",
    actualDelivery: "request.time",
    updatedAt: "request.time"
  }) {
    id
    status
    actualDelivery
    updatedAt
  }
}

# Order Item Mutations
mutation UpsertOrderItem($id: UUID!, $orderId: UUID!, $productId: UUID!, $quantity: Int!, $unitPrice: Float!, $totalPrice: Float!, $notes: String) {
  orderItem_upsert(data: {
    id: $id,
    orderId: $orderId,
    productId: $productId,
    quantity: $quantity,
    unitPrice: $unitPrice,
    totalPrice: $totalPrice,
    notes: $notes
  }) {
    id
    orderId
    productId
    quantity
    unitPrice
    totalPrice
  }
}

# Notification Mutations
mutation UpsertNotification($id: UUID!, $userId: String!, $type: String!, $title: String!, $message: String!, $read: Boolean!, $data: String) {
  notification_upsert(data: {
    id: $id,
    userId: $userId,
    type: $type,
    title: $title,
    message: $message,
    read: $read,
    data: $data,
    createdAt: "request.time"
  }) {
    id
    userId
    type
    title
    message
    read
    createdAt
  }
}

mutation MarkNotificationRead($id: UUID!) {
  notification_upsert(data: {
    id: $id,
    read: true
  }) {
    id
    read
  }
}

# System Configuration Mutations
mutation UpsertSystemConfig($id: String!, $value: String!, $description: String, $updatedBy: String!) {
  systemConfig_upsert(data: {
    id: $id,
    value: $value,
    description: $description,
    updatedBy: $updatedBy,
    updatedAt: "request.time"
  }) {
    id
    value
    description
    updatedBy
    updatedAt
  }
}
