# Faded Skies Portal - Data Connect Queries
# Simplified queries for Data Connect compatibility

# User Management Queries
query GetUser($id: String!) {
  user(id: $id) {
    id
    email
    role
    companyName
    contactName
    phone
    address
    licenseNumber
    status
    createdAt
    updatedAt
    lastLogin
  }
}

query GetUsers($role: String, $status: String) {
  users(where: {
    role: { eq: $role },
    status: { eq: $status }
  }) {
    id
    email
    role
    companyName
    contactName
    phone
    status
    createdAt
    lastLogin
  }
}

query GetPendingPartners {
  users(where: {
    role: { eq: "partner" },
    status: { eq: "pending" }
  }) {
    id
    email
    companyName
    contactName
    phone
    licenseNumber
    createdAt
  }
}

# Product Management Queries
query GetProducts($category: String, $status: String) {
  products(where: {
    category: { eq: $category },
    status: { eq: $status }
  }) {
    id
    name
    description
    category
    subcategory
    thcContent
    cbdContent
    price
    wholesalePrice
    stockQuantity
    minOrderQuantity
    maxOrderQuantity
    status
    images
    labResults
    createdAt
    updatedAt
  }
}

query GetProduct($id: UUID!) {
  product(id: $id) {
    id
    name
    description
    category
    subcategory
    thcContent
    cbdContent
    price
    wholesalePrice
    stockQuantity
    minOrderQuantity
    maxOrderQuantity
    status
    images
    labResults
    createdAt
    updatedAt
    createdBy
  }
}

query GetLowStockProducts($threshold: Int!) {
  products(where: {
    stockQuantity: { le: $threshold },
    status: { eq: "active" }
  }) {
    id
    name
    stockQuantity
    wholesalePrice
  }
}

# Order Management Queries
query GetOrders($partnerId: String, $status: String) {
  orders(where: {
    partnerId: { eq: $partnerId },
    status: { eq: $status }
  }) {
    id
    orderNumber
    partnerId
    status
    totalAmount
    subtotal
    tax
    shipping
    notes
    shippingAddress
    billingAddress
    createdAt
    updatedAt
    estimatedDelivery
    actualDelivery
    trackingNumber
  }
}

query GetOrder($id: UUID!) {
  order(id: $id) {
    id
    orderNumber
    partnerId
    status
    totalAmount
    subtotal
    tax
    shipping
    notes
    shippingAddress
    billingAddress
    createdAt
    updatedAt
    estimatedDelivery
    actualDelivery
    trackingNumber
  }
}

query GetOrderItems($orderId: UUID!) {
  orderItems(where: {
    orderId: { eq: $orderId }
  }) {
    id
    productId
    quantity
    unitPrice
    totalPrice
    notes
  }
}

query GetRecentOrders($limit: Int!) {
  orders(orderBy: { createdAt: DESC }, limit: $limit) {
    id
    orderNumber
    partnerId
    status
    totalAmount
    createdAt
  }
}

# Notification Queries
query GetNotifications($userId: String!, $read: Boolean) {
  notifications(where: {
    userId: { eq: $userId },
    read: { eq: $read }
  }, orderBy: { createdAt: DESC }) {
    id
    type
    title
    message
    read
    createdAt
    data
  }
}

query GetUnreadNotificationCount($userId: String!) {
  notifications(where: {
    userId: { eq: $userId },
    read: { eq: false }
  }) {
    id
  }
}

# System Configuration Queries
query GetSystemConfig($id: String!) {
  systemConfig(id: $id) {
    id
    value
    description
    updatedBy
    updatedAt
  }
}

query GetAllSystemConfigs {
  systemConfigs {
    id
    value
    description
    updatedAt
  }
}
